<!DOCTYPE html>
<html lang="en"><!--
 __  __                __                                     __
/\ \/\ \              /\ \             __                    /\ \
\ \ \_\ \   __  __    \_\ \      __   /\_\      __       ___ \ \ \/'\
 \ \  _  \ /\ \/\ \   /'_` \   /'__`\ \/\ \   /'__`\    /'___\\ \ , <
  \ \ \ \ \\ \ \_\ \ /\ \L\ \ /\  __/  \ \ \ /\ \L\.\_ /\ \__/ \ \ \\`\
   \ \_\ \_\\/`____ \\ \___,_\\ \____\ _\ \ \\ \__/.\_\\ \____\ \ \_\ \_\
    \/_/\/_/ `/___/> \\/__,_ / \/____//\ \_\ \\/__/\/_/ \/____/  \/_/\/_/
                /\___/                \ \____/
                \/__/                  \/___/

Powered by Hydejack v7.5.0 <https://qwtel.com/hydejack/>
--><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><title>Dask and Spark | Joseph Hamilton - Solution Oriented Data Scientist</title><meta name="generator" content="Jekyll v3.6.2" /><meta property="og:title" content="Dask and Spark" /><meta name="author" content="Joseph Hamilton" /><meta property="og:locale" content="en" /><meta name="description" content="Spark and Dask are somewhat overlapping in what they do. But they are also somewhat complementary." /><meta property="og:description" content="Spark and Dask are somewhat overlapping in what they do. But they are also somewhat complementary." /><meta property="og:site_name" content="Joseph Hamilton - Solution Oriented Data Scientist" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2018-03-25T00:00:00+00:00" /> <script type="application/ld+json"> {"description":"Spark and Dask are somewhat overlapping in what they do. But they are also somewhat complementary.","author":{"@type":"Person","name":"Joseph Hamilton"},"@type":"BlogPosting","url":"/project/kojak/2018/03/25/Dask-on-AWS/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/assets/icons/icon.png"},"name":"Joseph Hamilton"},"headline":"Dask and Spark","dateModified":"2018-03-25T00:00:00+00:00","datePublished":"2018-03-25T00:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"/project/kojak/2018/03/25/Dask-on-AWS/"},"@context":"http://schema.org"}</script><meta name="keywords" content="Data Science Python"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Joseph Hamilton - Solution Oriented Data Scientist"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="application-name" content="Joseph Hamilton - Solution Oriented Data Scientist"><meta name="msapplication-config" content="/assets/ieconfig.xml"><meta name="theme-color" content="#4fb1ba"><meta name="generator" content="Hydejack v7.5.0"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Joseph Hamilton - Solution Oriented Data Scientist" /><link rel="alternate" href="/project/kojak/2018/03/25/Dask-on-AWS/" hreflang="en"><link rel="shortcut icon" href="/assets/icons/favicon.ico"><link rel="apple-touch-icon" href="/assets/icons/icon.png"><link rel="manifest" href="/assets/manifest.json"><link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link id="_katexJS" rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.js"><link id="_katexCSS" rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.css"> <script> function stdOnEnd(n,e){n.onload=function(){this.onerror=this.onload=null,e(null,n)},n.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),n)}}function ieOnEnd(n,e){n.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,e(null,n))}}window.setRelStylesheet=function(n){function e(){this.rel="stylesheet"}var o=document.getElementById(n);o.addEventListener?o.addEventListener("load",e,!1):o.onload=e},window._loaded=!1,window.loadJSDeferred=function(n,e){function o(){window._loaded=!0;var o=document.createElement("script");o.src=n,e&&(("onload"in o?stdOnEnd:ieOnEnd)(o,e),o.onload||stdOnEnd(o,e));var t=document.scripts[0];t.parentNode.insertBefore(o,t)}window._loaded?o():window.addEventListener?window.addEventListener("load",o,!1):window.onload=o}; !function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this); !function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this); window._noPushState = false; window._noDrawer = false; </script> <!--[if gt IE 8]><!----> <script> WebFontConfig = { google: { families: ['Roboto+Slab:700','Noto+Sans:400,400i,700,700i'] }, custom: { families: ['icomoon'], urls: ['/assets/icomoon/style.css'] } }; (function(d) { var wf = d.createElement('script'), s = d.scripts[0]; wf.src = "/assets/bower_components/webfontloader/webfontloader.js"; s.parentNode.insertBefore(wf, s); }(document)); </script> <!--<![endif]--> <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:700%7CNoto+Sans:400,400i,700,700i"><style> html { font-family: Noto Sans, Helvetica, Arial, sans-serif } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-family: Roboto Slab, Helvetica, Arial, sans-serif }</style><link rel="stylesheet" href="/assets/icomoon/style.css"> </noscript> <!--[if gt IE 8]><!----><link rel="stylesheet" href="/assets/css/hydejack-7.5.0.css"><style id="_pageStyle"> .content a:not(.btn){color:#4fb1ba;border-color:rgba(79,177,186,0.2)}.content a:not(.btn):hover{border-color:#4fb1ba}:focus{outline-color:#4fb1ba}.btn-primary{color:#fff;background-color:#4fb1ba;border-color:#4fb1ba}.btn-primary:focus,.btn-primary.focus{box-shadow:0 0 0 3px rgba(79,177,186,0.5)}.btn-primary:hover,.btn-primary.hover{color:#fff;background-color:#409ba3;border-color:#409ba3}.btn-primary:disabled,.btn-primary.disabled{color:#fff;background-color:#4fb1ba;border-color:#4fb1ba}.btn-primary:active,.btn-primary.active{color:#fff;background-color:#409ba3;border-color:#409ba3}::selection{color:#fff;background:#4fb1ba}::-moz-selection{color:#fff;background:#4fb1ba}</style><!--<![endif]--><body><div class="navbar fixed-top"><div class="content"><div class="nav-btn-bar"> <span class="sr-only">Jump to:</span> <a id="_menu" class="nav-btn no-hover" href="#_navigation"> <span class="sr-only">Navigation</span> <span class="icon-menu"></span> </a></div></div></div><hy-push-state><main id="_main" class="content fade-in layout-post" role="main" data-color="#4fb1ba" data-theme-color="" data-image="/assets/img/sidebar-bg.jpg" data-overlay ><article id="post-project-kojak-2018-03-25-Dask-on-AWS" class="page post" role="article"><header><h1 class="post-title"> Dask and Spark</h1><p class="post-date heading"> <time datetime="2018-03-25T00:00:00+00:00">25 Mar 2018</time> in <a href="/category/project/" class="flip-title">Project</a> / <a href="/category/kojak/" class="flip-title">Kojak</a> on <span>Dask</span>, <span>Spark</span>, <span>Kubernetes</span>, <span>Aws</span>, <span>Emr</span>, <span>Ec2</span><div class="hr pb0"></div></header><p>Spark and Dask are somewhat overlapping in what they do. But they are also somewhat complementary.<p>To be terribly honest, for a lot of production level things it seems the “Big” of Big Data really has to be pretty signficant or upon analysis just building a large SQL database will serve just fine.<p>For my current project, there are things I want to take advantage of at both ends of a pipeline. For the initial feature engineering I may benefit from using Graphframes on Spark. There may be algorithms avaialble in Dask (eg. SpectralClustering) that aren’t yet available in Spark.<p>Dask is relatively new. And AWS keeps providing alternatives to doing things. So this post may get outdated realtively quickly. But, at the moment, this is what an individual would experience:<ul><li>Dask is far easier to install than Spark on a single, local machine.<li>Spark is much more straightforward to get working in a cluster on AWS.<li>Dask is vastly easier to learn for anyone used to Python and Pandas.<li>Spark is great for anyone already adept at SQL.<li>Dask is likely more capable of providing someone <em>immediate</em> relief if they’re running into memory issues trying to pull all their data into a large Pandas dataframe.</ul><p>Now, again, this is <strong>at the moment</strong>. If I had to roll my own Hadoop setup to lay Spark atop of, I very likely would be singing a different tune.<p>So what’s the issue with Dask?<p>First, let’s try to separate out things that pertain to any effort of taking advantage of a cluster. Not every problem can be parallelized. And many things that can require a fair amount of care to change the general approach. You cannot always just take your algorithms and functions and throw them to a parallel virtual machine, cluster or whatnot. This becomes evident even on a single machine. There are several sklearn models that incorpriate an “njobs” parameter to manage parallel processing across CPUs/cores. For the most part with Dask, if you can use this on a single machine, you can immediately use it on a cluster. You may still end up with issues where the data isn’t where you need it to be.<p>No, that’s not really different. You have to manage or at least be aware of that issue on Dask, Spark or whatever.<p>What’s different at the moment is that for a Dask cluster, you have to set up the cluster. For Spark with EMR this is qausi-magically managed for you.<p>And the more important thing. Dask is bleeding edge. The various software solutions to manage this cluster creation have come and gone rapidly in the relatively recent past.<p>But I have a feeling that things have somewhat settled on the suggested solution. So, I’ll describe that here. It may help to lay out one guiding principle to guide your thinking. If you try to look at this from the perspective of Dask or your python code using Dask as being “in control” and setting up the cluster as needed, you need to flip your thinking. Get comfortable with the idea that you need a system to manage a cluster to stick Dask (along with anything else) into.<p>So.. what is that system?<p>At the moment it’s Kubernetes for the cluster and Helm for the “sticking Dask in “ function.<p>This keeps things modular. It really doesn’t matter whether your Kubernetes cluster is on Google, Amazon, local network or whatever. Once you have it, you let Helm do the driving.<p>For AWS, this is how it breaks down:<ul><li>Spark is on EMR.<li>If you need to boostrap stuff to build in required functionality…<ul><li>You’ll be working with EMR’s way of managing this<li>The changes you’ll be making are on the AWS instances themselves.<li>You will be able to just SSH into the instances and make changes directly (eg. to test)<li>You may only need to change the master node for a variety of things.</ul><li>Dask will be on EC2<li>Should you need to control things to get desired functionality…<ul><li>These changes will need to be prepared inside Docker containers<li>You shouldn’t need to make changes in the instances themselves<li>It is <strong>possible</strong> to get into the individual Docker containers. But it’s far less easy to do.<li>It’s much more likely you will need to change the Docker container all workers use.</ul></ul></article><hr class="dingbat related" /><aside class="about related mt4 mb4" role="complementary"><div class="author mt4"> <img src="/assets/img/profile_400_400.jpg" class="avatar" alt="Joseph Hamilton" /><h2 class="page-title hr"> About</h2><p>I love Data Science, automation, scripting, chasing curiosities, exploring and learning new things.<div class="sidebar-social"> <span class="sr-only">Social:</span><ul><li> <a href="https://github.com/joseph-r-hamilton" title="GitHub" class="no-mark-external"> <span class="icon-github"></span> <span class="sr-only">GitHub</span> </a><li> <a href="mailto:hamilton.joseph.r@gmail.com" title="Email" class="no-mark-external"> <span class="icon-mail"></span> <span class="sr-only">Email</span> </a><li> <a href="https://www.linkedin.com/in/joseph-r-hamilton" title="LinkedIn" class="no-mark-external"> <span class="icon-linkedin2"></span> <span class="sr-only">LinkedIn</span> </a><li> <a href="https://www.hackerrank.com/josephrhamilton" title="Hacker Rank" class="no-mark-external"> <span class="icon-hackerrank"></span> <span class="sr-only">Hacker Rank</span> </a></ul></div></div></aside><aside class="related mb4" role="complementary"><h2 class="hr">Related Posts</h2><ul class="related-posts"><li> <a href="/project/kojak/2018/03/22/Trouble-with-Clusters/" class="h4 flip-title"> <span>Trouble with Clusters</span> </a> <time class="heading faded fine" datetime="2018-03-22T00:00:00+00:00">22 Mar 2018</time><li> <a href="/project/kojak/2018/03/15/Project-Kojak-Begins/" class="h4 flip-title"> <span>Project Kojak Begins</span> </a> <time class="heading faded fine" datetime="2018-03-15T00:00:00+00:00">15 Mar 2018</time><li> <a href="/project/fletcher/2018/03/09/Project-Fletcher-Closing/" class="h4 flip-title"> <span>Project Fletcher Closing</span> </a> <time class="heading faded fine" datetime="2018-03-09T00:00:00+00:00">09 Mar 2018</time></ul></aside><footer role="contentinfo"><hr/><p><small class="copyright">© 2017. All rights reserved. </small><hr class="sr-only"/></footer></main><hy-drawer><header id="_sidebar" class="sidebar" role="banner"><div class="sidebar-bg sidebar-overlay" style="background-color:#4fb1ba;background-image:url(/assets/img/sidebar-bg.jpg)"></div><div class="sidebar-sticky"><div class="sidebar-about"><h2 class="h1"><a href="/">Joseph Hamilton - Solution Oriented Data Scientist</a></h2><p class=""> A blog and project tracker</div><nav class="sidebar-nav heading" role="navigation"> <span class="sr-only">Navigation:</span><ul><li> <a id="_navigation" href="/blog/" class="sidebar-nav-item" > Blog </a><li> <a href="/about/" class="sidebar-nav-item" > About </a><li> <a href="/projects/" class="sidebar-nav-item" > Projects </a></ul></nav><div class="sidebar-social"> <span class="sr-only">Social:</span><ul><li> <a href="https://github.com/joseph-r-hamilton" title="GitHub" class="no-mark-external"> <span class="icon-github"></span> <span class="sr-only">GitHub</span> </a><li> <a href="mailto:hamilton.joseph.r@gmail.com" title="Email" class="no-mark-external"> <span class="icon-mail"></span> <span class="sr-only">Email</span> </a><li> <a href="https://www.linkedin.com/in/joseph-r-hamilton" title="LinkedIn" class="no-mark-external"> <span class="icon-linkedin2"></span> <span class="sr-only">LinkedIn</span> </a><li> <a href="https://www.hackerrank.com/josephrhamilton" title="Hacker Rank" class="no-mark-external"> <span class="icon-hackerrank"></span> <span class="sr-only">Hacker Rank</span> </a></ul></div></div></header></hy-drawer> </hy-push-state> <!--[if gt IE 9]><!----> <script>loadJSDeferred('/assets/js/hydejack-7.5.0.js');</script> <!--<![endif]--><hr class="sr-only"/><h2 class="sr-only">Templates (for web app):</h2><template id="_animation-template"><div class="animation-main fixed-top"><div class="content"><div class="page"></div></div></div></template> <template id="_loading-template"><div class="loading"> <span class="sr-only">Loading…</span> <span class="icon-cog"></span></div></template> <template id="_error-template"><div class="page"><h1 class="page-title">Error</h1><p class="lead"> Sorry, an error occurred while loading <a class="this-link" href=""></a>.</div></template> <template id="_back-template"> <a id="_back" class="back nav-btn no-hover"> <span class="sr-only">Back</span> <span class="icon-arrow-left2"></span> </a> </template> <template id="_permalink-template"> <a href="#" class="permalink"> <span class="sr-only">Permalink</span> <span class="icon-link"></span> </a> </template> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-115360087-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-115360087-1'); </script></html>
